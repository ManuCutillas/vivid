<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-a11y-keys/iron-a11y-keys.html">

<dom-module id="character-sarah">
    <template>

        <style>
            /* local styles go here */
            
            :host {
                display: inline-block;
                height: 64px;
                width: 64px;
                background-image: url(../src/img/sarah_bow.png);
            }
            
            :host([direction=left]) {
                background-position-y: -576px;
            }
            
            :host([direction=right]) {
                background-position-y: -704px;
            }
            
            :host([move]) {
                /* Animation name */
                animation-name: move;
                /* Animation time */
                animation-duration: 0.8s;
                /* Animation execution times */
                animation-iteration-count: infinite;
                /* Step number to run the animation */
                animation-timing-function: steps(9);
            }
            
            input {
                opacity: 0;
            }
            
            @keyframes move {
                from {
                    background-position-x: 0
                }
                to {
                    background-position-x: -576px
                }
            }
        </style>
        <!-- local DOM goes here -->
        <iron-a11y-keys target="[[target]]" id="a11y" keys="left right" on-keys-pressed="walk"></iron-a11y-keys>
        <input id="input" is="iron-input" value="{{userInput::input}}" />
    </template>

    <script>
  Polymer({
    /* this is the element's prototype */
    is: 'character-sarah',
    properties: {
      direction : {
          type: String,
          value: "left",
          notify: true,
          reflectToAttribute: true
      },
      move: {
        type: Boolean,
        value: false,
        notify: true,
        reflectToAttribute: true
      },
      target: {
        type: Object,
        value: function() {
        return this.$.input;
        }
    }
    },
    listeners: {
        'tap' : 'characterFocus'
    },
    characterFocus : function () {
        this.$.input.focus();
    },
    walk: function(event) {
      var direction = event.detail.keyboardEvent.keyIdentifier.toLowerCase();
      if (this.direction == direction) {
          this.move = !this.move;
      }
      this.direction = direction;
    }
  });
  </script>

</dom-module>